(this["webpackJsonpevent-app-front-end"]=this["webpackJsonpevent-app-front-end"]||[]).push([[0],{27:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(18),i=n.n(a),s=(n(27),n(3)),o=(n(6),n(4)),u=n(0);var d=function(e){var t,n,c,a,i,d=Object(r.useState)(!1),j=Object(s.a)(d,2),l=j[0],b=j[1];return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h2",{children:e.currentEvent?"Update Event":"Add Event"}),Object(u.jsx)("br",{}),Object(u.jsxs)("form",{onSubmit:function(t){return function(t){t.preventDefault(),b(!0),(e.currentEvent?e.client.updateEvent(e.currentEvent._id,t.target.eventName.value,t.target.location.value,t.target.precis.value,t.target.date.value,t.target.time.value):e.client.addEvent(t.target.eventName.value,t.target.location.value,t.target.precis.value,t.target.date.value,t.target.time.value)).then((function(){b(!1),document.getElementById("addForm").reset(),e.refreshList()})).catch((function(){alert("an error occured, please try again"),b(!1)}))}(t)},id:"addForm",children:["Name: ",Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"text",defaultValue:null===(t=e.currentEvent)||void 0===t?void 0:t.name,name:"eventName",disabled:l}),Object(u.jsx)("br",{}),"Location:",Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"text",defaultValue:null===(n=e.currentEvent)||void 0===n?void 0:n.location,name:"location",disabled:l}),Object(u.jsx)("br",{}),"Precis:",Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"text",defaultValue:null===(c=e.currentEvent)||void 0===c?void 0:c.precis,name:"precis",disabled:l}),Object(u.jsx)("br",{}),"Date:",Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"text",defaultValue:null===(a=e.currentEvent)||void 0===a?void 0:a.date,name:"date",disabled:l}),Object(u.jsx)("br",{}),"Time:",Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"text",defaultValue:null===(i=e.currentEvent)||void 0===i?void 0:i.time,name:"time",disabled:l}),Object(u.jsx)("br",{}),Object(u.jsx)("br",{}),Object(u.jsxs)(o.a,{variant:"dark",type:"submit",disabled:l,children:[" ","Submit"," "]})]})]})};n(9);var j=function(e){var t=Object(r.useState)([]),n=Object(s.a)(t,2),c=n[0],a=n[1],i=Object(r.useState)(void 0),j=Object(s.a)(i,2),l=j[0],b=j[1],v=function(){e.client.getEvents().then((function(e){return a(e.data)}))};return Object(r.useEffect)((function(){v()}),[]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h2",{children:"Event Dashboard"}),Object(u.jsx)("br",{}),Object(u.jsxs)("table",{children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"Event Name"}),Object(u.jsx)("th",{children:"Location"}),Object(u.jsx)("th",{children:"Precis"}),Object(u.jsx)("th",{children:"Date"}),Object(u.jsx)("th",{children:"Time"})]})}),Object(u.jsx)("tbody",{children:c.map((function(t){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:t.name}),Object(u.jsx)("td",{children:t.location}),Object(u.jsx)("td",{children:t.precis}),Object(u.jsx)("td",{children:t.date}),Object(u.jsx)("td",{children:t.time}),Object(u.jsxs)("td",{children:[Object(u.jsxs)(o.a,{variant:"dark",onClick:function(){return n=t._id,void e.client.removeEvent(n).then((function(){return v()}));var n},children:[" ","Remove"]})," ",Object(u.jsx)(o.a,{variant:"dark",onClick:function(){b(t)},children:"Update"})]})]},t._id)}))})]}),Object(u.jsx)("br",{}),Object(u.jsx)("br",{}),Object(u.jsx)(d,{client:e.client,refreshList:function(){v(),b(void 0)},currentEvent:l})]})},l=n(7),b=n.n(l),v=n(20),h=n(21),O=n(22),x=n(8),f=n.n(x),m="http://localhost:3001/",p=function(){function e(t,n){Object(h.a)(this,e),this.tokenProvider=t,this.logoutHandler=n}return Object(O.a)(e,[{key:"authenticatedCall",value:function(e,t,n){var r=this;return f()({method:e,url:t,headers:{authorization:this.tokenProvider()},data:n}).catch((function(e){if(403===e.response.status)return r.logoutHandler(),Promise.reject();throw e}))}},{key:"login",value:function(){var e=Object(v.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,n),e.next=3,f()({method:"post",url:"".concat(m,"auth"),data:{username:t,password:n}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getEvents",value:function(){return this.authenticatedCall("get",m)}},{key:"addEvent",value:function(e,t,n,r,c){return this.authenticatedCall("post",m,{name:e,location:t,precis:n,date:r,time:c})}},{key:"removeEvent",value:function(e){return this.authenticatedCall("delete","".concat(m).concat(e))}},{key:"updateEvent",value:function(e,t,n,r,c,a){return this.authenticatedCall("put","".concat(m).concat(e),{name:t,location:n,precis:r,date:c,time:a})}}]),e}();var g=function(e){var t=Object(r.useState)(!1),n=Object(s.a)(t,2),c=n[0],a=n[1];return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h2",{children:"Login"}),Object(u.jsx)("br",{}),Object(u.jsxs)("form",{onSubmit:function(t){return function(t){t.preventDefault(),a(!0),e.client.login(t.target.username.value,t.target.password.value).then((function(t){a(!1),console.log(t.data),e.loggedIn(t.data.token)})).catch((function(){alert("an error occured, please try again"),a(!1)}))}(t)},children:["Username",Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"text",name:"username",disabled:c}),Object(u.jsx)("br",{}),"Password",Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"password",name:"password",disabled:c}),Object(u.jsx)("br",{}),Object(u.jsx)("br",{}),Object(u.jsxs)(o.a,{variant:"dark",type:"submit",disabled:c,children:[" ","Submit"," "]})]})]})};var E=function(){var e=Object(r.useState)(window.localStorage.getItem("token")),t=Object(s.a)(e,2),n=t[0],c=t[1],a=new p((function(){return n}),(function(){return i()})),i=function(){window.localStorage.removeItem("token"),c(void 0)};return Object(u.jsx)(u.Fragment,{children:n?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(j,{client:a}),Object(u.jsx)("br",{}),Object(u.jsx)(o.a,{variant:"dark",onClick:i,children:"Logout"})]}):Object(u.jsx)(g,{loggedIn:function(e){return function(e){window.localStorage.setItem("token",e),c(e)}(e)},client:a})})},k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,49)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))};i.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(E,{})}),document.getElementById("root")),k()},9:function(e,t,n){}},[[48,1,2]]]);
//# sourceMappingURL=main.bd8b16df.chunk.js.map